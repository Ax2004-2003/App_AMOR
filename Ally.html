<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title>Para Aly, mi amor eterno ‚ô°</title>
    <meta name="theme-color" content="#ff69b4">
    <meta name="description" content="Un rinconcito solo para ti, mi amor">

    <!-- Iconos PWA -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíñ</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíñ</text></svg>">
    
    <!-- Manifest integrado -->
    <link rel="manifest" href="data:application/json;base64,eyJzaG9ydF9uYW1lIjoiTXkgQW1vciIsIm5hbWUiOiJQYXJhIG1pIG5vdmlhIEFMWSIsImljb25zIjpbeyJzcmMiOiJkYXRhOmltYWdlL3N2Zyt4bWwsPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48dGV4dCB5PSIuOWVtIiBmb250LXNpemU9IjkwIj7wn4yCIDwvdGV4dD48L3N2Zz4iLCJzaXplcyI6IjE5MngxOTIiLCJ0eXBlIjoiaW1hZ2Uvc3ZnK3htbCJ9LHsic3JjIjoiZGF0YTppbWFnZS9zdmcreG1sLDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHRleHQgeT0iLjllbSIgZm9udC1zaXplPSI5MCI+8J+MgjwvdGV4dD48L3N2Zz4iLCJzaXplcyI6IjUxMng1MTIiLCJ0eXBlIjoiaW1hZ2Uvc3ZnK3htbCJ9XSwic3RhcnRfdXJsIjoiLi8iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsImJhY2tncm91bmRfY29sb3IiOiIjZmZlZWJlIiwidGhlbWVfY29sb3IiOiIjZmY2OWI0Iiwib3JpZW50YXRpb24iOiJwb3J0cmFpdCIsInNjb3BlIjoiLyJ9">

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #ffeef8, #ffccdd);
            color: #444;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
        }
        .card {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px 30px;
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(255, 105, 180, 0.35);
            max-width: 90%;
            animation: float 8s ease-in-out infinite;
            position: relative;
            z-index: 1;
        }
        h1 {
            font-size: 2.5em;
            color: #e91e63;
            margin-bottom: 15px;
        }
        .photo-container {
            margin: 30px 0;
            position: relative;
            display: inline-block;
            cursor: pointer;
        }
        #aly-photo {
            width: 250px;
            height: 250px;
            object-fit: cover;
            border-radius: 50%;
            border: 8px solid #ff69b4;
            box-shadow: 0 10px 30px rgba(233, 30, 99, 0.4);
            animation: fadeIn 2s ease-out, pulse 4s infinite ease-in-out, floatPhoto 6s infinite ease-in-out;
            transition: transform 0.3s;
        }
        #aly-photo:hover {
            transform: scale(1.05);
        }
        .heart-frame {
            position: absolute;
            top: -20px; left: -20px; right: -20px; bottom: -20px;
            border: 6px solid #ff1493;
            border-radius: 50%;
            opacity: 0.3;
            animation: rotate 20s linear infinite;
        }
        p { font-size: 1.3em; line-height: 1.6; margin: 20px 0; }
        .message {
            font-size: 1.5em;
            color: #d81b60;
            font-weight: bold;
            margin: 30px 0;
        }
        button {
            background: #e91e63;
            color: white;
            border: none;
            padding: 14px 30px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            margin: 10px;
            box-shadow: 0 6px 15px rgba(233, 30, 99, 0.4);
            transition: 0.3s;
        }
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(233, 30, 99, 0.5);
        }
        footer { margin-top: 40px; font-size: 1em; color: #e91e63; }
        .big-heart { font-size: 80px; animation: beat 1.5s infinite; margin: 20px 0; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        @keyframes pulse { 0%, 100% { box-shadow: 0 10px 30px rgba(233, 30, 99, 0.4); } 50% { box-shadow: 0 15px 40px rgba(255, 20, 147, 0.6); } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        @keyframes floatPhoto { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }

        /* Modal para foto ampliada */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }
        .modal.active {
            display: flex;
        }
        #full-photo {
            max-width: 90%;
            max-height: 90%;
            border-radius: 20px;
            border: 10px solid #ff69b4;
            box-shadow: 0 0 50px rgba(255, 105, 180, 0.8);
            animation: zoomIn 0.8s ease-out;
        }
        @keyframes zoomIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>

    <div class="card">
        <h1>¬°Para Aly, mi amor eterno! üíï</h1>
        <p>Esta app la hice pensando en ti, para que sientas mi amor cada d√≠a.</p>

        <div class="photo-container" id="photo-trigger">
            <img id="aly-photo" src="ally.png" alt="Mi hermosa Aly">
            <div class="heart-frame"></div>
        </div>

        <div class="big-heart">‚ù§Ô∏è</div>

        <div class="message">
            Eres la mujer de mi vida.<br>
            Te amo m√°s de lo que las palabras pueden decir.<br>
            Grande amore... como esta canci√≥n que me recuerda a ti.
        </div>

        <p>‚Äî Tu novio que te ama con locura ‚ô°</p>

        <div id="music-controls">
            <button id="playBtn">‚ñ∂Ô∏è Reproducir M√∫sica</button>
            <button id="pauseBtn" style="display:none;">‚è∏ Pausar M√∫sica</button>
        </div>

        <button id="installBtn" style="display:none;">üíæ Instalar como App</button>

        <footer>Hecho con todo mi amor ‚ô°</footer>
    </div>

    <!-- Modal para foto ampliada -->
    <div class="modal" id="photo-modal">
        <img id="full-photo" src="ally2.png" alt="Aly ampliada">
    </div>

    <audio id="music" src="grande-amore0.mp3" preload="auto"></audio>

    <script>
        // Service Worker para offline
        if ('serviceWorker' in navigator) {
            const swCode = `
                const CACHE = 'aly-amor-v2';
                const files = ['./', 'aly.png', 'grande-amore.mp3'];
                self.addEventListener('install', e => {
                    e.waitUntil(caches.open(CACHE).then(cache => cache.addAll(files)));
                });
                self.addEventListener('fetch', e => {
                    e.respondWith(caches.match(e.request).then(resp => resp || fetch(e.request)));
                });
            `;
            const blob = new Blob([swCode], {type: 'application/javascript'});
            const swUrl = URL.createObjectURL(blob);
            navigator.serviceWorker.register(swUrl);
        }

        // Controles de m√∫sica CORREGIDOS
        const audio = document.getElementById('music');
        const playBtn = document.getElementById('playBtn');
        const pauseBtn = document.getElementById('pauseBtn');

        playBtn.onclick = () => {
            audio.play();
            playBtn.style.display = 'none';
            pauseBtn.style.display = 'inline-block';
        };

        pauseBtn.onclick = () => {
            audio.pause();
            pauseBtn.style.display = 'none';
            playBtn.style.display = 'inline-block';
        };

        // Intentar autoplay despu√©s de interacci√≥n
        document.body.addEventListener('click', () => {
            if (audio.paused) audio.play().catch(() => {});
        }, { once: true });

        // Modal de foto ampliada
        const photoTrigger = document.getElementById('photo-trigger');
        const modal = document.getElementById('photo-modal');

        photoTrigger.onclick = () => {
            modal.classList.add('active');
        };

        modal.onclick = () => {
            modal.classList.remove('active');
        };

        // Instalaci√≥n PWA
        let deferredPrompt;
        const installBtn = document.getElementById('installBtn');
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.style.display = 'block';
        });
        installBtn.addEventListener('click', () => {
            installBtn.style.display = 'none';
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then(() => deferredPrompt = null);
        });
        window.addEventListener('appinstalled', () => installBtn.style.display = 'none');
    </script>
</body>
</html>